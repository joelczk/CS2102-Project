CREATE TABLE users(
	sid varchar(80),
	role varchar(80),
	password (80)
);


CREATE TABLE Course (
	cid	varchar(80) PRIMARY KEY,
	cname	varchar(80)
);


CREATE TABLE Student (
	sid	varchar(80) PRIMARY KEY REFERENCES user(id),
	name	varchar(80),
	year	integer,
	password varchar(80)
);


CREATE TABLE Professor (
	cid	varchar(80) PRIMARY KEY REFERENCES Course,
	pid	varchar(80),
	name	varchar(80),
	UNIQUE (pid)
);


CREATE TABLE StudentCourse (
	sid	integer REFERENCES Student,
	cid	integer REFERENCES Course,
	year	integer,
	sem	integer,
	grade	varchar(5),
	PRIMARY KEY (sid, cid, year, sem)
);


CREATE TABLE CurrentCourse AS
	SELECT sid, cid 
	FROM StudentCourse NATURAL JOIN Professor
	WHERE year = 2019 AND sem = 1;
ALTER TABLE CurrentCourse
	ADD PRIMARY KEY (sid, cid);


CREATE TABLE PossibleTA AS
	SELECT sid, cid
	FROM StudentCourse
	WHERE (year < 2019 OR sem < 1) AND grade LIKE ‘A%’;
ALTER TABLE PossibleTA
	ADD PRIMARY KEY (sid, cid);


CREATE TABLE TeachingAssistant (
	sid	varchar(80) PRIMARY KEY REFERENCES users(id),
	cid	varchar(80),
	password integer
	FOREIGN KEY (sid, cid) REFERENCES PossibleTA
);
